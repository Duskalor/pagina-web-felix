---
import { links, numero_contacto, mensaje_contacto } from '../lib/const';

const { pathname } = Astro.url;
const subpath = pathname.match(/[^\/]+/g);
---

<header
  class='fixed top-0 left-1/2 transform -translate-x-1/2 z-50 w-full transition-all duration-500 ease-in-out bg-white'
>
  <div
    class='container mx-auto flex w-full items-center justify-between gap-8 px-4 py-3 md:px-6 md:py-4 lg:px-8'
  >
    <!-- logo - start -->
    <a
      href='/'
      class='inline-flex items-center gap-2.5 text-2xl font-bold text-black md:text-3xl'
      aria-label='logo'
    >
      Green Golden
    </a>

    <!-- nav - start -->
    <nav class='hidden gap-12 lg:flex'>
      {
        links.map((link) => {
          const isActive =
            link.href === pathname || link.href === '/' + subpath?.[0];
          return (
            <a
              href={link.href}
              class={`text-lg font-semibold ${isActive ? 'text-indigo-500' : 'text-gray-600'} transition duration-100 hover:text-indigo-500 active:text-indigo-700`}
            >
              {link.nombre}
            </a>
          );
        })
      }
    </nav>
    <!-- nav - end -->

    <!-- buttons - start https://api.whatsapp.com/send?text=&phone= -->

    <a
      target='_blank'
      href={`https://api.whatsapp.com/send?text=${mensaje_contacto}&phone=${numero_contacto}`}
      class='hidden rounded-lg bg-indigo-500 px-8 py-3 text-center text-sm font-bold text-white outline-none ring-2 ring-indigo-500 transition duration-200 hover:bg-indigo-600 focus-visible:ring-2 active:bg-indigo-700 md:text-base lg:inline-block shadow-lg'
      >Contáctame</a
    >

    <button
      type='button'
      class='inline-flex items-center gap-2 rounded-lg bg-gray-200 px-2.5 py-2 text-sm font-semibold text-gray-500 ring-indigo-300 hover:bg-gray-300 focus-visible:ring active:text-gray-700 md:text-base lg:hidden'
    >
      <svg
        xmlns='http://www.w3.org/2000/svg'
        class='h-6 w-6'
        viewBox='0 0 20 20'
        fill='currentColor'
      >
        <path
          fill-rule='evenodd'
          d='M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z'
          clip-rule='evenodd'></path>
      </svg>

      Menu
    </button>
    <!-- buttons - end -->
  </div>
</header>

<script>
  // Detecta el scroll y cambia la clase del header dinámicamente
  let scrolled = false;

  // const handleScroll = () => {
  //   scrolled = window.scrollY > 80;
  //   const header = document.querySelector('header')!;
  //   if (scrolled) {
  //     header.classList.add('bg-white', 'shadow-lg');
  //     header.classList.remove('bg-white/40');
  //   } else {
  //     header.classList.add('bg-white/40');
  //     header.classList.remove('bg-white', 'shadow-lg');
  //   }
  // };

  // if (typeof window !== 'undefined') {
  //   window.addEventListener('scroll', handleScroll);
  // }
</script>
